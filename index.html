<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>麦橘增量游戏</title>
    <style>
        body, html {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #f0f0f0;
        }
        #game {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 600px;
            margin: 20px auto;
            overflow-y: auto;
            max-height: 90vh;
        }
        button {
            margin: 5px;
            padding: 5px 10px;
            font-size: 16px;
            transition: transform 0.1s;
        }
        button:active {
            transform: scale(0.95);
        }
        #orange {
            font-size: 50px;
            cursor: pointer;
            transition: transform 0.1s;
        }
        #orange:active {
            transform: scale(1.1);
        }
        .resource {
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        .multiplier {
            font-size: 0.8em;
            color: #888;
        }
        .bonus {
            font-size: 0.9em;
            color: #4a4;
        }
        .buttons {
            display: flex;
            flex-direction: column;
        }
        @media (max-width: 600px) {
            .resource {
                flex-direction: column;
                align-items: stretch;
            }
            .buttons {
                width: 100%;
            }
        }
        @keyframes pop {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        .pop {
            animation: pop 0.3s;
        }
    </style>
</head>
<body>
    <div id="game">
        <div id="orange">🍊</div>
        <p>麦橘: <span id="orangeCount">0</span> (+<span id="orangePerSecond">1</span>/秒)</p>
        <p>目标: 生产100亿个麦橘</p>
        <div class="resource">
            <div>
                创作者: <span id="creatorCount">0</span>
                <span id="creatorMultiplier" class="multiplier"></span>
            </div>
            <div class="buttons">
                <button onclick="buyResource('creator')">购买创作者 (<span id="creatorCost">5</span>麦橘)</button>
                <button onclick="buyMax('creator')">购买最大</button>
            </div>
        </div>
        <div class="resource">
            <div>
                社群: <span id="communityCount">0</span>
                <span id="communityMultiplier" class="multiplier"></span>
            </div>
            <div class="buttons">
                <button onclick="buyResource('community')">创建社群 (<span id="communityCost">50</span>创作者)</button>
                <button onclick="buyMax('community')">购买最大</button>
            </div>
        </div>
        <div class="resource">
            <div>
                KOL: <span id="kolCount">0</span>
                <span id="kolMultiplier" class="multiplier"></span>
            </div>
            <div class="buttons">
                <button onclick="buyResource('kol')">培养KOL (<span id="kolCost">200</span>社群)</button>
                <button onclick="buyMax('kol')">购买最大</button>
            </div>
        </div>
        <div class="resource">
            <div>
                社区: <span id="societyCount">0</span>
                <span id="societyMultiplier" class="multiplier"></span>
            </div>
            <div class="buttons">
                <button onclick="buyResource('society')">创立社区 (<span id="societyCost">1000</span>KOL)</button>
                <button onclick="buyMax('society')">购买最大</button>
            </div>
        </div>
        <button onclick="reincarnate()">转生</button>
        <p>下次转生需要: <span id="reincarnationRequirement">10000</span> 麦橘</p>
        <p>当前转生次数: <span id="reincarnationCount">0</span></p>
        <div id="bonuses">
            <h3>转生加成</h3>
            <p>麦橘生产: <span id="orangeBonus" class="bonus">+0</span>/秒</p>
            <p>资源效率: <span id="efficiencyBonus" class="bonus">+0%</span></p>
            <p>成本降低: <span id="costReduction" class="bonus">-0%</span></p>
        </div>
    </div>

    <audio id="clickSound" src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//uQwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAANmAA1NTU1NTU1NTU1TU1NTU1NTU1NTWZmZmZmZmZmZmaAgICAgICAgICAmpqampqampqamrOzs7Ozs7Ozs7PM////////zMz///8AAAA5TEFNRTMuMTAwAc0AAAAAAAAAABSAJAOkQgAAgAAADZizO6QWAAAAAAD/+7DEAAAI4AEx4BGAAB8jJo/RNAJB4iIoYhAhEREQQhCCEHY7pjtyO/8EIBCD//93O73fwQBQEP/7v+7/EAQgQ8ffsQBCEIR/e7ve7+CGYHGNUAABHlz+JMaAjB0H0FEALgX8O4v5cCgAAHwIN4bBoCh8fN3gRKAAlYtR+Mk5j6EBjI/24agG1Nrr+r3/9vGtlBE4zv/7oMTdgAk5eTnmGKAI7Z0oO5WUAE5D9OyGVbr//+pvpbfOEAAvAFVHd3QUBQyPMTNBlrGBcAEEg4P/uBU5q4aOkjjqG1A7hpKSiGXesbw3GX+q4+LZUgqmtKL/////jbmj+vz2/+tKhhiFf1W7YRIIiVlcglFmUNZYr7AhAg4RkpKQAAAAAABXLr43l+m7IMRW8UWDxNDBdhEQABChyuCGd0bxVLbHxGfCWkE5DuAVo5vVIFi/ZMIBiLjzBb7PnGAkSaZ9/0LhgNIRNBM//ugxNoACVmfQ9ysYADxHOi7hAwBJYQEXEJJLTTiQx0X////9cg4HhgU52K8fvQAJKmvG/7Z0/L9sEAACfV0BQPBaAAYeH0cjNQF2qH+IUGTI5ij//+yNGgttUEX////1eHMqKURFRh6sFEhsNPhhjVq+rCBgBJJG5YgnAQMCmCpTv1UkFVCkpAGOzAgQVBKQQj0uuFRWPQ6MYSECfSgIRSCEeUwNipqwrGRJBF////xDFGcDI2LMYOhE1Nxgzg4NTL4U2Hoe/7kMTtAAkFjznssQAJMLRme5YgAToXC/5ZWjgyKyBXrxcFLBBRcJwVn4Vf/DFwT//+XKIABhwgeDgIhsH4KQMuDoHwMgkTgGrw95zE4ZFZFpBoYCwZA+B46YjCEkC4kI7EhnKHcKGNAEgA0JgLAgKAjFgQb1g4GicyYBRWRMZlDQEoiiwOIo2LKLSaTKL8sIYTgBBMhcHw7EAaHDBgCYGQPhszIKCcHIODIj0BguFBIRSLKLDcyqGbgsFRnVxCGIU1GVnGIoTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVf/7gMTsAgntjT3cvGAJCpFpO4eMAS1VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV" preload="auto"></audio>
    <audio id="buySound" src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//uQwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAANmAA1NTU1NTU1NTU1TU1NTU1NTU1NTWZmZmZmZmZmZmaAgICAgICAgICAmpqampqampqamrOzs7Ozs7Ozs7PM////////zMz///8AAAA5TEFNRTMuMTAwAc0AAAAAAAAAABSAJAOkQgAAgAAADZizO6QWAAAAAAD/+7DEAAAJDAEx4BGAAB7jJo/RNABBERERBBERBCISdNI0jSISI4h3d3EREREREEX///wxERERERERISEn/wwww6JERERERMMMOgww//+JERERCIiKwiqqoYx5zZsIR5zZsIAFQEFwI/Ig7xJ3EoBAX4uOfhqBB3iO4s4uHMQdxcLwI/C/4r/gRRiPwIY4lcNfq3/9f68OfDVaqK///6FREagVE01Fv/7kMTrgAlRjUHcpGAA9ZuoO4WUAT//95rS4UOVVtdZt9WVwQYhXLvPrpAATzlA4X1/lAaAnBpAAAEfbLF0KphRxW5rRzwBTKCE3JFR03sB9j3Pn4o+6W1+Oiyz9vzZvHf//////zk3aZ//tPV8azkMW9XK2uiuLssvACCQQSGWkABAAAAQAFAABUX9jf0RhPc4LIoAACq7Mu/ZaJOkG8JyKW7QKcZQOb2t6e9VK/g2jQkbSo4PtRgRagRAQ//uQxOsACPmTQ9yoYAkSMig7hYwBBhg5FcUl+2pE3EJSUpKUlNaWW42h3sVxSWHIWm///22Hc4hjADt+JcADveLHRYwIAABgBqH+aqOv1UnxgAwwMMwFi8L+w3GJUXlhx5////xwjxM0E+JwmqGcJ8gqKkVFEMDDIZ2HqAwYGBQYaLw+7UlmCo9ht5bGU3DuDYCBKcYh0Oiz6UW1VnkKDBUY7C6iwsKlBAMG5Q4iEE4wZGOgvm5wI//uAxOkACPGXT9ywYAEgMif7l4wBXCkZAB8iOwhcyISDMwS6hUygBswsQGDQaQTHIWIiwLEjHg0HjJQKAgXvK6Ycs63VcxGEgUDgsHBzYGA4XG9xmHgcI2F4NDiQjIJoLbsYGSEioZAYKCMSFRIHBk4OlTCCaE6bAxaaDzQFBOFRZAZi4bKwoJBsxEDFwrCYuHkADwUCcEAUCAaECQrVKHysG5QcIg2bZrTnCDCYOYuFYsYINjFwMaGJAgGg2ZEBjIIgkMhFUTEFNRTMuOTkuNVVVVVVVVVVVVVVVVVVVVVV" preload="auto"></audio>

    <script>
        let game = {
            orange: 0,
            creator: { count: 0, cost: 5, multiplier: 1 },
            community: { count: 0, cost: 50, multiplier: 1 },
            kol: { count: 0, cost: 200, multiplier: 1 },
            society: { count: 0, cost: 1000, multiplier: 1 },
            reincarnations: 0,
            reincarnationRequirement: 10000,
            orangeBonus: 0,
            efficiencyBonus: 0,
            costReduction: 0
        };

        const milestones = [10, 25, 50, 100, 200, 500, 1000];

        function formatNumber(num) {
            if (num >= 1e8) return (num / 1e8).toFixed(2) + "亿";
            if (num >= 1e4) return (num / 1e4).toFixed(2) + "万";
            return num.toFixed(0);
        }

        function updateDisplay() {
            document.getElementById("orangeCount").textContent = formatNumber(game.orange);
            document.getElementById("orangePerSecond").textContent = formatNumber(calculateOrangePerSecond());
            document.getElementById("creatorCount").textContent = formatNumber(game.creator.count);
            document.getElementById("communityCount").textContent = formatNumber(game.community.count);
            document.getElementById("kolCount").textContent = formatNumber(game.kol.count);
            document.getElementById("societyCount").textContent = formatNumber(game.society.count);

            document.getElementById("creatorCost").textContent = formatNumber(Math.floor(game.creator.cost * (1 - game.costReduction)));
            document.getElementById("communityCost").textContent = formatNumber(Math.floor(game.community.cost * (1 - game.costReduction)));
            document.getElementById("kolCost").textContent = formatNumber(Math.floor(game.kol.cost * (1 - game.costReduction)));
            document.getElementById("societyCost").textContent = formatNumber(Math.floor(game.society.cost * (1 - game.costReduction)));

            document.getElementById("creatorMultiplier").textContent = `x${game.creator.multiplier}`;
            document.getElementById("communityMultiplier").textContent = `x${game.community.multiplier}`;
            document.getElementById("kolMultiplier").textContent = `x${game.kol.multiplier}`;
            document.getElementById("societyMultiplier").textContent = `x${game.society.multiplier}`;

            document.getElementById("reincarnationRequirement").textContent = formatNumber(game.reincarnationRequirement);
            document.getElementById("reincarnationCount").textContent = game.reincarnations;

            document.getElementById("orangeBonus").textContent = "+" + game.orangeBonus.toFixed(1);
            document.getElementById("efficiencyBonus").textContent = "+" + (game.efficiencyBonus * 100).toFixed(1) + "%";
            document.getElementById("costReduction").textContent = "-" + (game.costReduction * 100).toFixed(1) + "%";

            if (game.orange >= 1e10) {
                alert("恭喜你达成目标，生产了100亿个麦橘！");
            }
        }

        function calculateOrangePerSecond() {
            return 1 + game.orangeBonus + game.creator.count * game.creator.multiplier * (1 + game.efficiencyBonus);
        }

        function buyResource(type) {
            let cost;
            let currency;
            switch(type) {
                case 'creator':
                    cost = Math.floor(game.creator.cost * (1 - game.costReduction));
                    currency = game.orange;
                    break;
                case 'community':
                    cost = Math.floor(game.community.cost * (1 - game.costReduction));
                    currency = game.creator.count;
                    break;
                case 'kol':
                    cost = Math.floor(game.kol.cost * (1 - game.costReduction));
                    currency = game.community.count;
                    break;
                case 'society':
                    cost = Math.floor(game.society.cost * (1 - game.costReduction));
                    currency = game.kol.count;
                    break;
            }

            if (currency >= cost) {
                if (type === 'creator') {
                    game.orange -= cost;
                } else {
                    game[Object.keys(game)[Object.keys(game).indexOf(type) - 1]].count -= cost;
                }
                game[type].count++;
                game[type].cost *= type === 'creator' ? 1.05 : 
                                   type === 'community' ? 1.15 : 
                                   type === 'kol' ? 1.25 : 1.35;
                checkMultiplier(type);
                updateDisplay();
                playBuySound();
                animatePop(document.getElementById(type + "Count"));
            }
        }

        function buyMax(type) {
            let currency, cost, growthRate;
            switch(type) {
                case 'creator':
                    currency = game.orange;
                    cost = Math.floor(game.creator.cost * (1 - game.costReduction));
                    growthRate = 1.05;
                    break;
                case 'community':
                    currency = game.creator.count;
                    cost = Math.floor(game.community.cost * (1 - game.costReduction));
                    growthRate = 1.15;
                    break;
                case 'kol':
                    currency = game.community.count;
                    cost = Math.floor(game.kol.cost * (1 - game.costReduction));
                    growthRate = 1.25;
                    break;
                case 'society':
                    currency = game.kol.count;
                    cost = Math.floor(game.society.cost * (1 - game.costReduction));
                    growthRate = 1.35;
                    break;
            }

            let bought = 0;
            while (currency >= cost) {
                if (type === 'creator') {
                    game.orange -= cost;
                } else {
                    game[Object.keys(game)[Object.keys(game).indexOf(type) - 1]].count -= cost;
                }
                game[type].count++;
                bought++;
                cost = Math.floor(cost * growthRate);
                checkMultiplier(type);
                currency = type === 'creator' ? game.orange : game[Object.keys(game)[Object.keys(game).indexOf(type) - 1]].count;
            }
            game[type].cost = cost / (1 - game.costReduction);
            updateDisplay();
            if (bought > 0) {
                playBuySound();
                animatePop(document.getElementById(type + "Count"));
            }
        }

        function checkMultiplier(type) {
            const count = game[type].count;
            for (let milestone of milestones) {
                if (count === milestone) {
                    game[type].multiplier *= 2;
                    break;
                }
            }
        }

        function produce() {
            game.orange += calculateOrangePerSecond() / 10;
            game.creator.count += game.community.count * game.community.multiplier * (1 + game.efficiencyBonus) / 10;
            game.community.count += game.kol.count * game.kol.multiplier * (1 + game.efficiencyBonus) / 10;
            game.kol.count += game.society.count * game.society.multiplier * (1 + game.efficiencyBonus) / 10;
        }

        function reincarnate() {
            if (game.orange >= game.reincarnationRequirement) {
                game.reincarnations++;
                game.orangeBonus += 1 * game.reincarnations;
                game.efficiencyBonus += 0.05 * game.reincarnations;
                game.costReduction = Math.min(0.75, 0.02 * game.reincarnations);

                game = {
                    ...game,
                    orange: 0,
                    creator: { count: 0, cost: 5, multiplier: 1 },
                    community: { count: 0, cost: 50, multiplier: 1 },
                    kol: { count: 0, cost: 200, multiplier: 1 },
                    society: { count: 0, cost: 1000, multiplier: 1 },
                    reincarnationRequirement: Math.floor(game.reincarnationRequirement * 1.5)
                };
                updateDisplay();
                playBuySound();
                animatePop(document.getElementById("reincarnationCount"));
            }
        }

        function playClickSound() {
            document.getElementById("clickSound").play();
        }

        function playBuySound() {
            document.getElementById("buySound").play();
        }

        function animatePop(element) {
            element.classList.add('pop');
            setTimeout(() => element.classList.remove('pop'), 300);
        }

        document.getElementById("orange").addEventListener("click", function() {
            game.orange++;
            updateDisplay();
            playClickSound();
            animatePop(this);
        });

        setInterval(produce, 100);
        setInterval(updateDisplay, 1000);
        updateDisplay();
    </script>
</body>
</html>
